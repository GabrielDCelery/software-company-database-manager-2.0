var DatabaseApp=angular.module("DatabaseApp",["ngRoute","ngCookies","AuthCtrl","AuthFactory","CompaniesCtrl","CompaniesFactory","MailingCtrl","MailingFactory","SubMenuFactory"]);DatabaseApp.config(["$routeProvider","$locationProvider",function(a,o){a.when("/companies",{templateUrl:"templates/companies/_companies_main.html",controller:"CompaniesCtrl"}).when("/mailing",{templateUrl:"templates/mailing/_mailing_main.html",controller:"MailingCtrl"}).otherwise({redirectTo:"/"}),o.html5Mode(!0)}]);var AuthCtrl=angular.module("AuthCtrl",[]);AuthCtrl.controller("AuthCtrl",["$scope","AuthFactory",function(a,o){function t(t,e){o.login(t,e,function(n){n.data?(a.loggedIn=!0,o.setLoginCookie(t,e)):a.loggedIn=!1})}function e(){a.loggedIn=!1,o.clearLoginCookie()}function n(a){o.getLoginCookie(a)}a.loggedIn=!1,a.login=t,a.logout=e,n(t)}]);var AuthFactory=angular.module("AuthFactory",[]);AuthFactory.factory("AuthFactory",["$http","$cookies",function(a,o){function t(o,t,e){a.post("php/login.php",{username:o,password:t}).success(e)}function e(a,t){var e=i.encode(a),n=i.encode(t),r={username:e,password:n};o.putObject("userCookie",r)}function n(){o.remove("userCookie")}function r(a){var t=o.getObject("userCookie");if(t){var e=i.decode(t.username),n=i.decode(t.password);a(e,n)}}var i={keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var o,t,e,n,r,i="",l="",c="",u=0;do o=a.charCodeAt(u++),t=a.charCodeAt(u++),l=a.charCodeAt(u++),e=o>>2,n=(3&o)<<4|t>>4,r=(15&t)<<2|l>>6,c=63&l,isNaN(t)?r=c=64:isNaN(l)&&(c=64),i=i+this.keyStr.charAt(e)+this.keyStr.charAt(n)+this.keyStr.charAt(r)+this.keyStr.charAt(c),o=t=l="",e=n=r=c="";while(u<a.length);return i},decode:function(a){var o,t,e,n,r,i="",l="",c="",u=0,s=/[^A-Za-z0-9\+\/\=]/g;s.exec(a)&&window.alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");do e=this.keyStr.indexOf(a.charAt(u++)),n=this.keyStr.indexOf(a.charAt(u++)),r=this.keyStr.indexOf(a.charAt(u++)),c=this.keyStr.indexOf(a.charAt(u++)),o=e<<2|n>>4,t=(15&n)<<4|r>>2,l=(3&r)<<6|c,i+=String.fromCharCode(o),64!=r&&(i+=String.fromCharCode(t)),64!=c&&(i+=String.fromCharCode(l)),o=t=l="",e=n=r=c="";while(u<a.length);return i}};return{login:t,setLoginCookie:e,clearLoginCookie:n,getLoginCookie:r}}]);var CompaniesCtrl=angular.module("CompaniesCtrl",[]);CompaniesCtrl.controller("CompaniesCtrl",["$scope","subMenu",function(a,o){function t(t){o.displayContent(a.display.form,t,function(o){a.display.form=o})}function e(){a.display=angular.copy(n)}a.display={form:{searchCompany:!1,sendEmail:!1,showDetails:!1,extendContract:!1,addNewCompany:!1}};var n=angular.copy(a.display);a.menu=t,a.reset=e}]);var CompaniesFactory=angular.module("CompaniesFactory",[]);CompaniesFactory.factory("CompaniesFactory",[function(){}]);var MailingCtrl=angular.module("MailingCtrl",[]);MailingCtrl.controller("MailingCtrl",["$scope","subMenu",function(a,o){function t(t){o.displayContent(a.display.form,t,function(o){a.display.form=o})}function e(){a.display=angular.copy(n)}a.display={form:{searchMails:!1,forwardMails:!1,editMails:!1,addNewMails:!1}};var n=angular.copy(a.display);a.menu=t,a.reset=e}]);var MailingFactory=angular.module("MailingFactory",[]);MailingFactory.factory("MailingFactory",["$http",function(a){}]);var SubMenuFactory=angular.module("SubMenuFactory",[]);SubMenuFactory.factory("subMenu",[function(){function a(a,o,t){for(var e in a)e==o?a[e]=!0:a[e]=!1;t(a)}return{displayContent:a}}]);